AcctSeed.ASModule=function(a,t,o,d){"use strict";var i,e,l=[],s=[],c=(d.addAttachments=function(t,a){"outstanding"==a?(l=l.concat(t),c(l)):(s=s.concat(t),r(s))},function(t){void 0!==i&&i.destroy(),i=o('[id$="outstandingAttachmentsTable"]').DataTable({data:t,paging:!1,lengthChange:!1,pageLength:10,searching:!1,ordering:!1,info:!1,autoWidth:!1,columns:[{title:"Name",data:"fileName"},{title:"Size",data:"fileSize",render:function(t,a,i,e){return d.fileSizeFormatter(t,3)},className:"dt-head-right dt-body-right"},{title:"Action",data:"fileId",render:function(t,a,i,e){return"<a href='#' id='"+t+"' class='cancelOutstandingAttachment'><span style='color: red;'>Cancel</span></a>"},className:"dt-head-center dt-body-center"}]});t=JSON.stringify(t);t=(t=t.substring(1,t.length-1)).replace(/\\"/g,'"'),o('[id$="outstandingProxyInput"]').val(t),o(".cancelOutstandingAttachment").on("click",function(){n(o(this).attr("id"),"outstanding")})}),r=function(t){void 0!==e&&e.destroy(),e=o('[id$="activityAttachmentsTable"]').DataTable({data:t,paging:!1,lengthChange:!1,pageLength:10,searching:!1,ordering:!1,info:!1,autoWidth:!1,columns:[{title:"Name",data:"fileName"},{title:"Size",data:"fileSize",render:function(t,a,i,e){return d.fileSizeFormatter(t,3)},className:"dt-head-right dt-body-right"},{title:"Action",data:"fileId",render:function(t,a,i,e){return"<a href='#' id='"+t+"' class='cancelActivityAttachment'><span style='color: red;'>Cancel</span></a>"},className:"dt-head-center dt-body-center"}]});t=JSON.stringify(t);t=(t=t.substring(1,t.length-1)).replace(/\\"/g,'"'),o('[id$="activityProxyInput"]').val(t),o(".cancelActivityAttachment").on("click",function(){n(o(this).attr("id"),"activity")})},n=function(t,a){for(var i=[],e="outstanding"==a?l:s,n=0;n<e.length;n++)e[n].fileId!==t&&i.push(e[n]);"outstanding"==a?c(l=i):r(s=i)},u=(d.setCustomStyleOnBtn=function(t){o(".btn").toggleClass("btnDisabled").val(t)},d.newWin=null,d.openCustomFilePicker=function(t){return d.newWin=a.open(t,"Popup","height=550,width=780,left=200,top=200,resizable=no,scrollbars=no,toolbar=no,status=no"),a.focus&&d.newWin.focus(),!1},d.closeCustomFilePicker=function(){null!=d.newWin&&d.newWin.close()},d.setContact=function(t,a,n,i){Visualforce.remoting.Manager.invokeAction(d.setContactRemote,t,a,n,i,function(t,a){{var i,e;a.status?t.isValidContact?("undefined"==typeof CKEDITOR||null===CKEDITOR?"outstanding"===n?(""==o('[id$="outstandingEmailSubject"]').val()&&o('[id$="outstandingEmailSubject"]').val(t.template.emailSubject),""==o('[id$="outstandingEmailBody"]').val()&&o('[id$="outstandingEmailBody"]').val(t.template.emailBody)):(""==o('[id$="activityEmailSubject"]').val()&&o('[id$="activityEmailSubject"]').val(t.template.emailSubject),""==o('[id$="activityEmailBody"]').val()&&o('[id$="activityEmailBody"]').val(t.template.emailBody)):(e=(i=("outstanding"===n?(""==o('[id$="outstandingEmailSubject"]').val()&&o('[id$="outstandingEmailSubject"]').val(t.template.emailSubject),o('[id$="outstandingEmailBody"]')):(""==o('[id$="activityEmailSubject"]').val()&&o('[id$="activityEmailSubject"]').val(t.template.emailSubject),o('[id$="activityEmailBody"]'))).attr("id"),t.template.emailBody),""==CKEDITOR.instances[i].getData()&&CKEDITOR.instances[i].setData(e)),o('[id$="emailAttachButton1"],[id$="emailAttachButton2"]').attr("disabled",!1),o('[id$="emailAttachButton1"],[id$="emailAttachButton2"]').addClass("btn"),o('[id$="emailAttachButton1"],[id$="emailAttachButton2"]').removeClass("btnDisabled"),o('[id$="outstandingErrorPanel"],[id$="activityErrorPanel"]').hide()):u(t.errorMessage,n):u(a.message,n)}},{escape:!1,timeout:12e4})},function(t,a){m(t,a),("outstanding"===a?(o('[id$="emailAttachButton1"]').attr("disabled","disabled"),o('[id$="emailAttachButton1"]')):(o('[id$="emailAttachButton2"]').attr("disabled","disabled"),o('[id$="emailAttachButton2"]'))).addClass("btnDisabled")}),m=function(t,a){t&&("outstanding"===a?(o('[id$="outstandingErrorPanel"]').show(),o('[id$="outstandingErrorPanel"]')):(o('[id$="activityErrorPanel"]').show(),o('[id$="activityErrorPanel"]'))).html("Error: "+t)};return d.setCustomStyleOnBtn=function(t){o(".btn").toggleClass("btnDisabled").val(t)},d.showTab1Buttons=function(){o("[id*=saveAttachButton1]").show(),o("[id*=emailAttachButton1]").show()},d.showTab2Buttons=function(){o("[id*=saveAttachButton2]").show(),o("[id*=emailAttachButton2]").show()},d.hideFrame1=function(){o("#loader1").css("display","none")},d.hideFrame2=function(){o("#loader2").css("display","none")},d.loadFrame1=function(){d.hideFrame1(),d.showTab1Buttons(),d.refreshAttachments()},d.loadFrame2=function(){d.hideFrame2(),d.showTab2Buttons(),d.refreshAttachments()},d.refreshAttachments=function(){o('[id$="outstandingProxyInput"]').length&&""!==o('[id$="outstandingProxyInput"]').val()&&(l=[],d.addAttachments(JSON.parse(o('[id$="outstandingProxyInput"]').val()),"outstanding")),o('[id$="activityProxyInput"]').length&&""!==o('[id$="activityProxyInput"]').val()&&(s=[],d.addAttachments(JSON.parse(o('[id$="activityProxyInput"]').val()),"activity"))},d.validateEmails=function(){o('[id$="emailErrorPanel"]').hide();var t=!0;return o(".tag").each(function(){o(this).hasClass("notValid")&&(t=!1)}),t?d.setCustomStyleOnBtn("Processing..."):(o('[id$="emailErrorPanel"]').show(),o('[id$="emailErrorPanel"]').find("h4").html("One or more ะกะก Addresses are not valid."),!1)},o(a).on("load",function(){d.loadFrame1(),d.loadFrame2()}),o(t).ready(function(){d.refreshAttachments()}),d}(window,document,$j,AcctSeed.ASModule);