AcctSeed.ASModule=function(o,i){"use strict";var u,t,e,n,a=i.platformPublishableKey,s=i.stripeConnectedId,r=i.noStripeConnectedId;return i.disableButtons=function(e){o(".pbButton > .btn, .pbButtonb > .btn").toggleClass("btnDisabled").prop("disabled",!0).val(e)},i.loadingTable=function(e){e?o(".paymentMethodTable").css("visibility","hidden"):o(".paymentMethodTable").css("visibility","visible")},i.deletePaymentMethodJS=function(e,t){if(!confirm(t))return!1;deletePaymentMethod(e)},i.switchStatusOfPaymentMethodJS=function(e,t){if(!confirm("Are you sure you want to change the Payment Method's status?"))return!1;0===t?switchStatusOfPaymentMethod(e):1===t&&switchStatusOfPaymentMethod2(e)},i.setDefaultPaymentMethodJS=function(e,t){if(!confirm("Are you sure you want to make this Payment method as Default?"))return!1;0===t?setDefaultPaymentMethod(e):1===t&&setDefaultPaymentMethod2(e)},i.verifyBankAccountJS=function(t){vex.defaultOptions.className="vex-theme-default",vex.dialog.prompt({message:"Microdeposit amounts in cents.",input:["<style>",".vex-custom-field-wrapper {","display: inline-flex;","margin: 1em 0;","}",".vex-custom-field-wrapper > label {","width: 140px;","margin-bottom: .2em;","}","</style>",'<div class="vex-custom-field-wrapper">','<label for="firstDeposit">First deposit</label>','<div class="vex-custom-input-wrapper">','<input name="firstDeposit" type="text" pattern="[0-9]{2}" value="" title="Two-digit positive number for an amount in cents"/>',"</div>","</div>",'<div class="vex-custom-field-wrapper">','<label for="secondDeposit">Second deposit</label>','<div class="vex-custom-input-wrapper">','<input name="secondDeposit" type="text" pattern="[0-9]{2}" value="" title="Two-digit positive number for an amount in cents"/>',"</div>","</div>"].join(""),callback:function(e){e&&verifyBankAccount(t,e.firstDeposit,e.secondDeposit)}})},i.submitPaymentForm=function(){o("#submitPaymentBtn").prop("disabled",!0);var e=o("#cardholder-name").val();return u.createToken(t,{name:e}).then(function(e){e.error?(o(n).text(e.error.message),o("#submitPaymentBtn").prop("disabled",!1)):i.stripeTokenHandler(e.token,!1)}),!1},i.submitPaymentForm2=function(){o("#ach-errors,#ach-error-routing-nmb,#ach-error-account-nmb").empty(),o("#routing-number,#account-number").removeClass("ErrorInputField"),o("#submitPaymentBtn2").prop("disabled",!0);var e=o("#accountholder-name").val(),t=o("#accountholder-type").val(),n=o("#routing-number").val(),a=o("#account-number").val(),s="You must specify a 9 digit Routing Number.",r="You must specify a 6 to 17 digit Account Number.";return n||a?n?a?u.createToken("bank_account",{country:"US",currency:"usd",routing_number:n,account_number:a,account_holder_name:e,account_holder_type:t}).then(function(e){e.error?(o("#ach-errors").text(e.error.message),o("#submitPaymentBtn2").prop("disabled",!1)):i.stripeTokenHandler(e.token,!0)}):(o("#ach-error-account-nmb").text(r),o("#account-number").addClass("ErrorInputField"),o("#submitPaymentBtn2").prop("disabled",!1)):(o("#ach-error-routing-nmb").text(s),o("#routing-number").addClass("ErrorInputField"),o("#submitPaymentBtn2").prop("disabled",!1)):(o("#ach-error-routing-nmb").text(s),o("#ach-error-account-nmb").text(r),o("#routing-number,#account-number").addClass("ErrorInputField"),o("#submitPaymentBtn2").prop("disabled",!1)),!1},i.stripeTokenHandler=function(e,t){(t?createACHPayment:createPayment)(JSON.stringify(e))},i.clearForm=function(){t.clear(),o("#cardholder-name, #accountholder-name, #routing-number, #account-number").val(""),i.enableButtons(),o("#submitPaymentBtn, #submitPaymentBtn2").prop("disabled",!1)},i.enableButtons=function(){o(".pbButton > .btn, .pbButtonb > .btn").each(function(){var e=o(this).attr("name");-1!=o(this).attr("name").indexOf("cancelButton")&&(e="Back"),-1!=o(this).attr("name").indexOf("submitPayment")&&(e=o('[id$="tabs"]').length?"Create Payment Method":"Create Payment"),o(this).removeClass("btnDisabled").prop("disabled",!1).val(e)})},i.initStripeElements=function(){n=o('[id$="card-errors"]'),a&&s?(u=Stripe(a,{stripeAccount:s}),e=u.elements(),(t=e.create("card",{hidePostalCode:!0})).mount("#card-element"),t.addEventListener("change",function(e){e.error?o(n).text(e.error.message):o(n).text("")})):o(n).text("Authorisation Error: 1.) Publishable Key: "+a+" 2.) Connected Account Id: "+s)},i.setActiveTab=function(e){o(".slds-tabs_scoped__item").each(function(){o(this).removeClass("slds-is-active")}),o(e).addClass("slds-is-active")},i.overridePageMessages=function(){o(".warningM3").addClass("slds-notify slds-notify--toast slds-theme--warning customMessage "),o(".confirmM3").addClass("slds-notify slds-notify--alert slds-theme--success  customMessage "),o(".errorM3").addClass("slds-notify slds-notify--alert slds-theme--error customMessage "),o(".infoM3").addClass("slds-notify slds-notify--toast customMessage "),o(".errorM3").removeClass("errorM3"),o(".confirmM3").removeClass("confirmM3"),o(".infoM3").removeClass("infoM3"),o(".warningM3").removeClass("warningM3")},o(function(){!r&&o('[id$="tabs"]').length&&(o('[id$="tabs"]').tabs(),o(".slds-tabs_scoped__item").click(function(){i.setActiveTab(o(this))}),i.initStripeElements(),i.overridePageMessages())}),i}((window,document,$j),AcctSeed.ASModule);